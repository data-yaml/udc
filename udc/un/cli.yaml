_yaml:
  _version: 0.1.0
  app: UnCli
  app_version: 0.2.0
  doc: udc
  doc_version: 0.2.0
  handlers:
    doc:
      module: udc.wrapper
      method: Wrapper
    quilt:
      module: udc.quilt.resource
      method: QuiltResource
    benchling:
      module: udc.benchling.resource
      method: BenchlingResource
    uri:
      module: self
      method: get_resource
      key: _resource
argsets:
  remote:
    arguments:
      - $ref: "#/variables/dir"
      - $ref: "#/variables/uri"
    options:
      - $ref: "#/variables/nocopy"
    handler:
      class: udc.cli.Remote
      method: run
  stage:
    arguments:
      - $ref: "#/variables/local"
    options:
      - $ref: "#/variables/path"
    handler:
      class: udc.cli.Stage
      method: run
commands:
  list:
    arguments:
      - $ref: "#/variables/uri"
    help: List members of a resource
  get:
    $ref: "#/argsets/remote"
    help: Get contents of remote URI into directory (and gitignore it)
  put:
    $ref: "#/argsets/remote"
    help: Put commited contents from directory to remote URI (replace)
  patch:
    $ref: "#/argsets/remote"
    help: Patch commited contents from directory into latest remote URI (update)
  _add:
    $ref: "#/argsets/stage"
    help: Add local file to staging
  _rm:
    $ref: "#/argsets/stage"
    help: Remove local file from staging
  _commit:
    help: Commit staged changes
    options:
      - $ref: "#/variables/all"
      - $ref: "#/variables/msg"
  _status:
    help: Show status of staging area
  diff:
    help: Show diff of contents versus last commit
    options:
      - $ref: "#/variables/verbose"
variables:
  all:
    name: "--add-all"
    short: "-a"
    help: Automatically add all changes
    type: str
    format: path
  dir:
    name: dir
    help: Local directory
    type: Path
  local:
    name: local
    help: Local file
    type: Path
  msg:
    name: "--msg"
    short: "-m"
    help: Commit message explaining changes
    type: str
  nocopy:
    name: "--no-copy"
    short: "-n"
    help: Do not copy S3 objects (use references where possible)
    action: store_true
  path:
    name: "--path"
    short: "-p"
    help: "Remote relative, logical path to store objects in"
    type: str
    format: path
  uri:
    name: uri
    help: URI of resource to list
    type: UnUri
  verbose:
    name: "--verbose"
    short: "-v"
    help: Display verbose version of output
    action: store_true
  version:
    name: "--version"
    short: "-V"
    help: Display version information
    scope: global
